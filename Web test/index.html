<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thu th·∫≠p d·ªØ li·ªáu</title>
  <style>
    body {
      font-family: 'Comic Sans MS', 'Trebuchet MS', cursive, sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #FFE5E5 0%, #FFF9E5 50%, #E5F9FF 100%);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    h1 {
      font-size: 48px;
      color: #FF6B9D;
      margin: 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    #qinfo {
      font-size: 32px !important;
      font-weight: bold;
      color: #FF6B9D;
      margin: 15px 0 20px 0 !important;
    }
    #prompt {
      font-size: 28px !important;
      color: #4CAF50;
      font-weight: bold;
      margin: 15px 0;
    }
    img {
      width: 520px;
      max-width: 90%;
      border: 6px solid #FF6B9D;
      border-radius: 25px;
      box-shadow: 0 8px 16px rgba(255, 107, 157, 0.3);
      margin: 20px auto;
      display: block;
    }
    .choices {
      display: flex;
      gap: 20px;
      justify-content: center;
      align-items: stretch;
      flex-wrap: nowrap;
      margin: 30px auto;
      max-width: 1600px;
      overflow-x: auto;
    }
    .choice {
      background: linear-gradient(180deg, #FFFFFF 0%, #FFF5F5 100%);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      min-width: 280px;
      flex-shrink: 0;
      border: 4px solid #FFD700;
    }
    .choice h2 {
      font-size: 32px;
      color: #FF6B9D;
      margin: 10px 0 20px 0;
    }
    .result-table {
      border-collapse: collapse;
      margin: 25px auto;
      min-width: 600px;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    .result-table th {
      background: linear-gradient(90deg, #FF6B9D 0%, #FFB3D9 100%);
      color: white;
      font-size: 20px;
      padding: 15px;
      text-align: center;
    }
    .result-table td {
      border: 2px solid #FFE5E5;
      padding: 12px;
      text-align: center;
      font-size: 18px;
    }
    .result-table img { 
      width: 140px; 
      height: 140px;
      object-fit: contain;
      display: block; 
      margin: 0 auto;
      border-radius: 10px;
    }
    button {
      font-size: 26px;
      padding: 16px 28px;
      margin: 10px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      font-family: 'Comic Sans MS', cursive;
    }
    #addNumberBtn, #removeNumberBtn {
      background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
      color: white;
    }
    #addNumberBtn:hover:not(:disabled), #removeNumberBtn:hover:not(:disabled) {
      background: linear-gradient(135deg, #388E3C 0%, #4CAF50 100%);
      transform: scale(1.05);
    }
    #addTallyBtn, #removeTallyBtn {
      background: linear-gradient(135deg, #2196F3 0%, #64B5F6 100%);
      color: white;
    }
    #addTallyBtn:hover:not(:disabled), #removeTallyBtn:hover:not(:disabled) {
      background: linear-gradient(135deg, #1565C0 0%, #2196F3 100%);
      transform: scale(1.05);
    }
    #addIconBtn, #removeIconBtn {
      background: linear-gradient(135deg, #FFC107 0%, #FFD54F 100%);
      color: #333;
    }
    #addIconBtn:hover:not(:disabled), #removeIconBtn:hover:not(:disabled) {
      background: linear-gradient(135deg, #FF9800 0%, #FFC107 100%);
      transform: scale(1.05);
    }
    #answerBtn {
      background: linear-gradient(135deg, #FF6B9D 0%, #FF8AB3 100%);
      color: white;
      font-size: 30px;
      padding: 18px 40px;
      margin: 20px;
    }
    #answerBtn:hover:not(:disabled) {
      background: linear-gradient(135deg, #E91E63 0%, #FF6B9D 100%);
      transform: scale(1.08);
    }
    #answerBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .box {
      margin-top: 20px;
      font-size: 32px;
      font-weight: bold;
      color: #FF6B9D;
      min-height: 50px;
      padding: 10px;
      background: #FFF5F5;
      border-radius: 10px;
    }
    #result {
      font-size: 28px;
      color: #FF6B9D;
      margin: 20px 0;
      font-weight: bold;
    }
    hr {
      border: none;
      height: 3px;
      background: linear-gradient(90deg, #FFB3D9, #FFE5E5, #FFB3D9);
      margin: 25px 0;
    }
  </style>
</head>
<body>

<h1>üëÄ Quan s√°t b·ª©c ·∫£nh</h1>

<div id="qinfo" style="font-size:20px;margin-bottom:8px">C√¢u 1 / 5</div>
<img id="photo" src="./Image/Image1.png" alt="C√¥n tr√πng">

<p id="prompt"><b>Em h√£y ƒë·∫øm s·ªë con ong üêù trong b·ª©c ·∫£nh</b></p>

<!-- C√°c l·ª±a ch·ªçn (x·∫øp ngang) -->
<div class="choices">
  <div class="choice">
    <h2>üî¢ Ghi b·∫±ng s·ªë</h2>
    <button id="addNumberBtn" onclick="addNumber()">‚ûï</button>
    <button id="removeNumberBtn" onclick="removeNumber()">‚ûñ</button>
    <div class="box">S·ªë con ong: <span id="number">0</span></div>
  </div>

  <div class="choice">
    <h2>‚úçÔ∏è Ghi b·∫±ng v·∫°ch ki·ªÉm</h2>
    <button id="addTallyBtn" onclick="addTally()">Th√™m v·∫°ch |</button>
    <button id="removeTallyBtn" onclick="removeTally()">Xo√° v·∫°ch</button>
    <div class="box" id="tally"></div>
  </div>

  <div class="choice">
    <h2>‚≠ê Ghi b·∫±ng k√Ω hi·ªáu</h2>
    <button id="addIconBtn" onclick="addIcon()">‚≠ê</button>
    <button id="removeIconBtn" onclick="removeIcon()">Xo√° h√¨nh ·∫£nh</button>
    <div class="box" id="icons"></div>
  </div>
</div>

<hr>

<div style="margin-top:12px">
  <button id="answerBtn" onclick="submitAnswer()" disabled>Tr·∫£ l·ªùi</button>
</div>

<h2 id="result"></h2>

<script>
let number = 0;
let tally = "";
let icons = "";
let selectedMethod = null; // 'number' | 'tally' | 'icons' or null
const questions = [
  {img: './Image/Image1.png', prompt: 'Em h√£y ƒë·∫øm s·ªë con ong üêù trong b·ª©c ·∫£nh 1'},
  {img: './Image/Image2.png', prompt: 'Em h√£y ƒë·∫øm s·ªë ch√¢u ch·∫•u ü¶ó trong b·ª©c ·∫£nh 2'},
  {img: './Image/Image3.png', prompt: 'Em h√£y ƒë·∫øm s·ªë B√¥ng hoa üåª trong b·ª©c ·∫£nh 3'},
  {img: './Image/Image4.png', prompt: 'Em h√£y ƒë·∫øm s·ªë ·ªëc s√™n üêå trong b·ª©c ·∫£nh 4'},
  {img: './Image/Image5.png', prompt: 'Em h√£y ƒë·∫øm s·ªë ch√∫ b∆∞·ªõm ü¶ã trong b·ª©c ·∫£nh 5'}
];
let currentQ = 0;
const answers = [];

function loadQuestion(idx = 0) {
  currentQ = idx;
  const q = questions[currentQ];
  document.getElementById('photo').src = q.img;
  document.getElementById('prompt').innerText = q.prompt;
  document.getElementById('qinfo').innerText = `C√¢u ${currentQ+1} / ${questions.length}`;
  // reset counters
  number = 0; tally = ''; icons = '';
  selectedMethod = null;
  update();
  document.getElementById('answerBtn').disabled = true;
}

function submitAnswer() {
  // store a simple snapshot of counts
  answers.push({
    number: number,
    tally: tally.length,
    icons: (icons.match(/‚≠ê/g) || []).length,
  });
  // move to next question or finish
  if (currentQ < questions.length - 1) {
    loadQuestion(currentQ + 1);
  } else {
    // finished - show summary as a table
    const res = document.getElementById('result');
    res.innerHTML = `<div>üéâ Ho√†n th√†nh! B·∫°n ƒë√£ tr·∫£ l·ªùi ${answers.length} c√¢u.</div>`;
    let html = '<table class="result-table"><thead><tr><th>C√¢u</th><th>·∫¢nh</th><th>S·ªë</th><th>V·∫°ch</th><th>Bi·ªÉu t∆∞·ª£ng</th></tr></thead><tbody>';
    answers.forEach((a, i) => {
      const q = questions[i];
      html += `<tr>` +
              `<td>${i+1}</td>` +
              `<td><img src="${q.img}" alt="img${i+1}"></td>` +
              `<td>${a.number}</td>` +
              `<td>${a.tally}</td>` +
              `<td>${a.icons}</td>` +
              `</tr>`;
    });
    html += '</tbody></table>';
    res.innerHTML += html;
    // disable controls
    document.getElementById('answerBtn').disabled = true;
    disableAllControls();
  }
}

function disableAllControls() {
  const ids = ['addNumberBtn','removeNumberBtn','addTallyBtn','removeTallyBtn','addIconBtn','removeIconBtn','answerBtn'];
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.disabled = true;
  });
}

function addNumber() {
  if (!selectedMethod) selectedMethod = 'number';
  number++;
  update();
}
function removeNumber() {
  if (number > 0) number--;
  // if number becomes zero and it was the selected method, clear selection
  if (number === 0 && selectedMethod === 'number') selectedMethod = null;
  update();
}
function addTally() {
  if (!selectedMethod) selectedMethod = 'tally';
  tally += "|";
  update();
}
function addIcon() {
  if (!selectedMethod) selectedMethod = 'icons';
  icons += "‚≠ê ";
  update();
}

function removeTally() {
  if (tally.length > 0) {
    tally = tally.slice(0, -1);
    if (tally.length === 0 && selectedMethod === 'tally') selectedMethod = null;
    update();
  }
}

function removeIcon() {
  const idx = icons.lastIndexOf('‚≠ê');
  if (idx !== -1) {
    icons = icons.slice(0, idx).trim();
    if (((icons.match(/‚≠ê/g) || []).length) === 0 && selectedMethod === 'icons') selectedMethod = null;
    update();
  }
}

function update() {
  document.getElementById("number").innerText = number;
  document.getElementById("tally").innerText = tally;
  document.getElementById("icons").innerText = icons;
  document.getElementById("result").innerText =
    "‚úÖ Con ƒë√£ thu th·∫≠p d·ªØ li·ªáu v·ªÅ s·ªë l∆∞·ª£ng h√¨nh ·∫£nh";
  // enable 'Tr·∫£ l·ªùi' button only after student has entered a count
  const ready = number > 0 || tally.length > 0 || icons.length > 0;
  const btn = document.getElementById('answerBtn');
  if (btn) btn.disabled = !ready;

  // lock other methods if one selected
  updateMethodLock();
}

function updateMethodLock() {
  const addNumberBtn = document.getElementById('addNumberBtn');
  const removeNumberBtn = document.getElementById('removeNumberBtn');
  const addTallyBtn = document.getElementById('addTallyBtn');
  const removeTallyBtn = document.getElementById('removeTallyBtn');
  const addIconBtn = document.getElementById('addIconBtn');
  const removeIconBtn = document.getElementById('removeIconBtn');
  if (!addNumberBtn) return;
  if (!selectedMethod) {
    addNumberBtn.disabled = false; removeNumberBtn.disabled = false;
    addTallyBtn.disabled = false; removeTallyBtn.disabled = false;
    addIconBtn.disabled = false; removeIconBtn.disabled = false;
  } else if (selectedMethod === 'number') {
    addNumberBtn.disabled = false; removeNumberBtn.disabled = false;
    addTallyBtn.disabled = true; removeTallyBtn.disabled = true;
    addIconBtn.disabled = true; removeIconBtn.disabled = true;
  } else if (selectedMethod === 'tally') {
    addNumberBtn.disabled = true; removeNumberBtn.disabled = true;
    addTallyBtn.disabled = false; removeTallyBtn.disabled = false;
    addIconBtn.disabled = true; removeIconBtn.disabled = true;
  } else if (selectedMethod === 'icons') {
    addNumberBtn.disabled = true; removeNumberBtn.disabled = true;
    addTallyBtn.disabled = true; removeTallyBtn.disabled = true;
    addIconBtn.disabled = false; removeIconBtn.disabled = false;
  }
}

// initialize first question on load
loadQuestion(0);
</script>

</body>
</html>
